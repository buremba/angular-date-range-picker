/*! angular-date-range-picker 2015-02-06 */
(function(){angular.module("dateRangePicker",[]);angular.module("dateRangePicker").directive("dateRangePicker",["$compile","$timeout",function(e,t){var n,r;r='<div ng-show="visible" class="angular-date-range-picker__picker" ng-click="handlePickerClick($event)" ng-class="{\'angular-date-range-picker--ranged\': showRanged }">\n  <div class="angular-date-range-picker__timesheet">\n    <a ng-click="move(-1, $event)" class="angular-date-range-picker__prev-month fa fa-arrow-left"></a>\n    <div ng-repeat="month in months" class="angular-date-range-picker__month">\n      <div class="angular-date-range-picker__month-name">{{::month.name}}</div>\n      <table class="angular-date-range-picker__calendar">\n        <tr>\n          <th ng-repeat="day in month.weeks[1]" class="angular-date-range-picker__calendar-weekday" bo-text="day.date.format(\'dd\')">\n          </th>\n        </tr>\n        <tr ng-repeat="week in month.weeks">\n          <td\n              ng-class=\'{\n                "angular-date-range-picker__calendar-day": day,\n                "angular-date-range-picker__calendar-day-selected": day.selected,\n                "angular-date-range-picker__calendar-day-disabled": day.disabled,\n                "angular-date-range-picker__calendar-day-start": day.start\n              }\'\n              ng-repeat="day in week track by $index" ng-click="select(day, $event)">\n              <div class="angular-date-range-picker__calendar-day-wrapper">{{::day.date.date()}}</div>\n          </td>\n        </tr>\n      </table>\n    </div>\n    <a ng-click="move(+1, $event)" class="angular-date-range-picker__next-month fa fa-arrow-right"></a>\n  </div>\n  <div class="angular-date-range-picker__panel">\n    <div ng-show="showRanged">\n<div>\n <li ng-repeat="e in quickList" ng-click="prevent_select(e.range)">{{e.label}}</li>     <a ng-click="hide($event)" class="btn btn-default btn-sm">cancel</a> <a ng-click="ok($event)" class="btn btn-primary btn-sm angular-date-range-picker__apply">Apply</a></div></div>  </div>\n</div>';n="CUSTOM";return{restrict:"AE",replace:true,template:'<span tabindex="0" ng-keydown="hide()" class="btn btn-default btn-sm angular-date-range-picker__input">\n  <span ng-if="showRanged">\n    <span ng-show="!!model">{{ model.start.format("ll") }} - {{ model.end.format("ll") }}</span>\n    <span ng-hide="!!model">Select date range</span>\n  </span>\n  <span ng-if="!showRanged">\n    <span ng-show="!!model">{{ model.format("ll") }}</span>\n    <span ng-hide="!!model">Select date</span>\n  </span>\n</span>',scope:{model:"=ngModel",customSelectOptions:"=",ranged:"=",pastDates:"@",callback:"&"},link:function(i,s,o){var u,a,f,l,c,h;i.quickListDefinitions=i.customSelectOptions;if(i.quickListDefinitions==null){i.quickListDefinitions=[{label:"Today",range:moment().range(moment().startOf("day"),moment().endOf("day"))},{label:"This week",range:moment().range(moment().startOf("week").startOf("day"),moment().endOf("week").startOf("day"))},{label:"This month",range:moment().range(moment().startOf("month").startOf("day"),moment().endOf("month").startOf("day"))},{label:"Last month",range:moment().range(moment().startOf("month").add(-1,"month").startOf("day"),moment().add(-1,"month").endOf("month").startOf("day"))}]}i.quick=null;i.range=null;i.selecting=false;i.visible=false;i.start=null;i.showRanged=i.ranged===void 0?true:i.ranged;c=function(e){var t,r,s,o,u;if(e==null){e=false}if(!i.showRanged){return}i.quickList=[];o=i.quickListDefinitions;u=[];for(r=0,s=o.length;r<s;r++){t=o[r];u.push(i.quickList.push(t))}i.quickList.push({label:"Custom",range:n});return u};f=function(){var e,t;if(i.showRanged){return i.range=i.selection?(t=i.selection.start.clone().startOf("month").startOf("day"),e=t.clone().add(2,"months").endOf("month").startOf("day"),moment().range(t,e)):moment().range(moment().startOf("month").subtract(1,"month").startOf("day"),moment().endOf("month").add(1,"month").startOf("day"))}else{i.selection=false;i.selection=i.model||false;i.date=moment(i.model)||moment();return i.range=moment().range(moment(i.date).startOf("month"),moment(i.date).endOf("month"))}};l=function(){var e,t,r,s;if(!i.showRanged){return}if(!i.selection){return}s=i.quickList;for(t=0,r=s.length;t<r;t++){e=s[t];if(e.range!==n&&i.selection.start.startOf("day").unix()===e.range.start.startOf("day").unix()&&i.selection.end.startOf("day").unix()===e.range.end.startOf("day").unix()){i.quick=e.range;c();return}}i.quick=n;return c(true)};h=function(){var e,t,n,r,s,o;i.months=[];n=i.range.start.year()*12+i.range.start.month();t=moment().startOf("week").day();i.range.by("days",function(e){var r,s,o,u,a,f,l;r=e.day()-t;if(r<0){r=7+r}o=e.year()*12+e.month()-n;a=parseInt((7+e.date()-r)/7);u=false;s=false;if(i.showRanged){if(i.start){u=e===i.start;s=e<i.start}else{u=i.selection&&i.selection.contains(e)}}else{u=e.isSame(i.selection);if(i.pastDates){s=moment().diff(e,"days")>0}}(f=i.months)[o]||(f[o]={name:e.format("MMMM YYYY"),weeks:[]});(l=i.months[o].weeks)[a]||(l[a]=[]);return i.months[o].weeks[a][r]={date:e,selected:u,disabled:s,start:i.start&&i.start.unix()===e.unix()}});o=i.months;for(r=0,s=o.length;r<s;r++){e=o[r];if(!e.weeks[0]){e.weeks.splice(0,1)}}return l()};i.show=function(){i.selection=i.model;f();h();return i.visible=true};i.hide=function(e){if(e!=null){if(typeof e.stopPropagation==="function"){e.stopPropagation()}}i.visible=false;return i.start=null};i.prevent_select=function(e){i.quick=e};i.ok=function(e){if(e!=null){if(typeof e.stopPropagation==="function"){e.stopPropagation()}}i.model=i.selection;t(function(){if(i.callback){return i.callback()}});return i.hide()};i.select=function(e,t){if(t!=null){if(typeof t.stopPropagation==="function"){t.stopPropagation()}}if(e.disabled){return}if(i.showRanged){i.selecting=!i.selecting;if(i.selecting){i.start=e.date}else{i.selection=moment().range(i.start,e.date);i.start=null}}else{i.selection=moment(e.date)}return h()};i.move=function(e,t){if(t!=null){if(typeof t.stopPropagation==="function"){t.stopPropagation()}}if(i.showRanged){i.range=moment().range(i.range.start.add(e,"months").startOf("month").startOf("day"),i.range.start.clone().add(2,"months").endOf("month").startOf("day"))}else{i.date.add(e,"months");i.range=moment().range(moment(i.date).startOf("month"),moment(i.date).endOf("month"))}return h()};i.handlePickerClick=function(e){return e!=null?typeof e.stopPropagation==="function"?e.stopPropagation():void 0:void 0};i.$watch("quick",function(e,t){if(!e||e===n){return}i.selection=i.quick;i.selecting=false;i.start=null;f();return h()});i.$watch("customSelectOptions",function(e){if(typeof customSelectOptions==="undefined"||customSelectOptions===null){return}return i.quickListDefinitions=e});a=e(angular.element(r))(i);s.append(a);s.bind("click",function(e){if(e!=null){if(typeof e.stopPropagation==="function"){e.stopPropagation()}}return i.$apply(function(){if(i.visible){return i.hide()}else{return i.show()}})});u=function(e){i.$apply(function(){return i.hide()});return true};angular.element(document).bind("click",u);i.$on("$destroy",function(){return angular.element(document).unbind("click",u)});c();f();return h()}}}])}).call(this)
